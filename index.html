<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/style.css">
    <title>じゃんけん</title>
</head>

<body>
    <div id="slotImage">
        <img src="imgs/pc_0.png" alt="Image0" id="comHandImage">
        <div class="start_btn">
            <input class="start_btn2" type="button" value="START" id="startButton">
            <!-- <button class="button1" type="button">Button</button> -->
        </div>
        <div class="stop_btn">
            <input class="stop_gu" type="button" src="imgs/my_gu.png" value="グー" id="stopButton0">
            <input class="stop_cho" type="button" src="./imgs/my_cho.png" value="チョキ" id="stopButton1">
            <input class="stop_par" type="button" src="./imgs/my_par.png" value="パー" id="stopButton2">
        </div>
    </div>
    <div id="com_hand">コンピュータのだしたては？</div>
    <div id="judgment">結果は？</div>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        $(function () {
            // ここに処理を記述しよう！
            //Startクリック時 
            let imgs = new Array();
            let cnt = 3;       // 画像枚数
            let speed = 50;   // ミリ秒(1秒=1000)
            let start = 0;
            let timerName;
            const result = ["グー", "チョキ", "パー"];

            for (i = 0; i < cnt; i++) {
                imgs[i] = './imgs/pc_' + (i) + '.png';
            }

            //timerName = setInterval(pars2images, speed);   // 自動的に開始する場合はコメント外す

            // com_hand パラパラ実行
            function slot() {
                $("#comHandImage").attr("src", imgs[start]);
                start++;
                if (start >= imgs.length) {
                    start = 0;
                }
            }

            // スタート
            $("#startButton").click(function () {
                // コンピューの手、結果の初期化
                $("#com_hand").text("コンピュータの手：");
                $("#judgment").text("結果は？");

                // 複数回禁止
                if (timerName) {
                    clearInterval(timerName);
                }
                // スロット起動
                timerName = setInterval(slot, speed);

            })

            // ストップ グー選択
            $("#stopButton0").click(function () {
                // スロットが起動しているとき
                if (timerName) {
                    // alert("ok");
                    let rand = Math.floor(Math.random() * 3);

                    $("#com_hand").text("コンピュータの手：" + result[rand]);
                    // 0コンピュータはグー, 1コンピューターはチョキ, 2コンピュータはパー
                    //コンピュータの手を表示
                    if (rand == 0) {
                        $("#judgment").text("あいこです");
                        $("#comHandImage").attr("src", "./imgs/pc_0.png");
                    } else if (rand == 1) {
                        $("#judgment").text("あなたの勝ちです");
                        $("#comHandImage").attr("src", "./imgs/pc_1.png");
                    } else {
                        $("#judgment").text("あなたの負けです");
                        $("#comHandImage").attr("src", "./imgs/pc_2.png");
                    }
                    // スロット起動クリア
                    clearInterval(timerName);
                    timerName = null;
                } else {
                    // スロット起動していない時
                    // コンピューの手、結果の初期化
                    $("#com_hand").text("コンピュータの手：");
                    $("#judgment").text("結果は？");
                    // アラート
                    alert("スタートボタンをクリックしてください");


                }

            });

            // ストップ チョキ選択
            $("#stopButton1").click(function () {
                // スロットが起動しているとき
                if (timerName) {
                    // alert("ok");
                    let rand = Math.floor(Math.random() * 3);

                    $("#com_hand").text("コンピュータの手：" + result[rand]);
                    // 0コンピュータはグー, 1コンピューターはチョキ, 2コンピュータはパー
                    //コンピュータの手を表示
                    if (rand == 0) {
                        $("#judgment").text("あなたの負けです");
                        $("#comHandImage").attr("src", "./imgs/pc_0.png");
                    } else if (rand == 1) {
                        $("#judgment").text("あいこです");
                        $("#comHandImage").attr("src", "./imgs/pc_1.png");
                    } else {
                        $("#judgment").text("あなたの勝ちです");
                        $("#comHandImage").attr("src", "./imgs/pc_2.png");
                    }
                    // スロット起動クリア
                    clearInterval(timerName);
                    timerName = null;
                } else {
                    // スロット起動していない時
                    // コンピューの手、結果の初期化
                    $("#com_hand").text("コンピュータの手：");
                    $("#judgment").text("結果は？");
                    // アラート
                    alert("スタートボタンをクリックしてください");

                }

            });

            // ストップ パー選択
            $("#stopButton2").click(function () {
                // スロットが起動しているとき
                if (timerName) {
                    // alert("ok");
                    let rand = Math.floor(Math.random() * 3);

                    $("#com_hand").text("コンピュータの手：" + result[rand]);
                    // 0コンピュータはグー, 1コンピューターはチョキ, 2コンピュータはパー
                    //コンピュータの手を表示
                    if (rand == 0) {
                        $("#judgment").text("あなたの勝ちです");
                        $("#comHandImage").attr("src", "./imgs/pc_0.png");
                    } else if (rand == 1) {
                        $("#judgment").text("あなたの負けです");
                        $("#comHandImage").attr("src", "./imgs/pc_1.png");
                    } else {
                        $("#judgment").text("あいこです");
                        $("#comHandImage").attr("src", "./imgs/pc_2.png");
                    }
                    // スロット起動クリア
                    clearInterval(timerName);
                    timerName = null;
                } else {
                    // スロット起動していない時
                    // コンピューの手、結果の初期化
                    $("#com_hand").text("コンピュータの手：");
                    $("#judgment").text("結果は？");
                    // アラート
                    alert("スタートボタンをクリックしてください");

                }

            });


        });
    </script>
</body>

</html>